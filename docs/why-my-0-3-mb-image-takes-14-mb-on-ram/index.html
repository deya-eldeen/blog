<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.4.9
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  
  <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5"> <!-- Theme Mode--> <script> const darkBtn = "Dark"; const lightBtn = "Light"; const isAutoTheme = true; const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'; if (isAutoTheme) { document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme') ?? preferredTheme); } else { document.documentElement.setAttribute('data-theme', "auto"); } </script> <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)--> <script defer src="/assets/js/main.min.js"></script> <!-- CSS --> <!-- <link rel="stylesheet" href="/assets/css/main.css"> --> <link rel="stylesheet" href="https://swiftbydeya.com/assets/css/main.css"> <!--Favicon--> <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"> <!-- KaTeX 0.16.9 --> <!-- Mermaid 10.8.0 --> <link rel="alternate" hreflang="x-default" href="https://swiftbydeya.com" /> <!-- Simple Jekyll Search 1.10.0 --> <script src="/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script> <!-- Google Analytics / Cookie Consent --> <script> const cookieName = 'cookie-notice-dismissed-https://swiftbydeya.com'; const isCookieConsent = 'true'; const analyticsName = 'G-KHK84G94HW'; const analyticsNameGA4 = ''; </script> <span id="cookie-notice"><span>We would like to use third party cookies and scripts to improve the functionality of this website. </span><a id="cookie-notice-accept" class="button">Approve</a> </span> <!-- Global site tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KHK84G94HW"></script> <!-- seo tags --> <meta property="og:image" content="https://swiftbydeya.com/images/covers/imagesize.webp"> <meta property="og:type" content="website" /> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Why my 0.3 MB image occupies around 10 MB on RAM? | Swift By Deya</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Why my 0.3 MB image occupies around 10 MB on RAM?" /> <meta name="author" content="Deya Elkhawaldeh" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="When developing applications, especially those that handle a large number of images, you may notice a significant difference between the disk size of an image and the amount of RAM it consumes. For example, you might have an image file that is only 0.3 MB on disk, yet it occupies around 10 MB of RAM when loaded. This post explores why this happens and what you can do to manage memory usage more effectively." /> <meta property="og:description" content="When developing applications, especially those that handle a large number of images, you may notice a significant difference between the disk size of an image and the amount of RAM it consumes. For example, you might have an image file that is only 0.3 MB on disk, yet it occupies around 10 MB of RAM when loaded. This post explores why this happens and what you can do to manage memory usage more effectively." /> <link rel="canonical" href="https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/" /> <meta property="og:url" content="https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/" /> <meta property="og:site_name" content="Swift By Deya" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2022-02-22T00:00:00+02:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Why my 0.3 MB image occupies around 10 MB on RAM?" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Deya Elkhawaldeh"},"dateModified":"2024-09-08T00:00:00+03:00","datePublished":"2022-02-22T00:00:00+02:00","description":"When developing applications, especially those that handle a large number of images, you may notice a significant difference between the disk size of an image and the amount of RAM it consumes. For example, you might have an image file that is only 0.3 MB on disk, yet it occupies around 10 MB of RAM when loaded. This post explores why this happens and what you can do to manage memory usage more effectively.","headline":"Why my 0.3 MB image occupies around 10 MB on RAM?","mainEntityOfPage":{"@type":"WebPage","@id":"https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/"},"url":"https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/"}</script> <!-- End Jekyll SEO tag --> <!-- RSS --> <link rel="alternate" type="application/atom+xml" title="Swift By Deya" href="https://swiftbydeya.com/feed.xml"/> <link type="application/atom+xml" rel="alternate" href="https://swiftbydeya.com/feed.xml" title="Swift By Deya" /> <!-- Twitter Cards --> <meta name="twitter:title" content="Why my 0.3 MB image occupies around 10 MB on RAM?"> <meta name="twitter:description" content="When developing applications, especially those that handle a large number of images, you may notice a significant difference between the disk size of an imag..."> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://swiftbydeya.com/images/covers/imagesize.webp"> <meta name="twitter:image:alt" content="Why my 0.3 MB image occupies around 10 MB on RAM?"> </head>
  <body>
    
    <header class="site-header"> <!-- Logo and title --> <div class="branding"> <a href="/"> <img alt="logo img" class="avatar" src="/assets/img/swift.webp" loading="lazy"/> </a> <a class="site-title" aria-label="Swift By Deya" href="/"> Swift By Deya </a> </div> <!-- Toggle menu --> <nav class="clear"> <a aria-label="pull" id="pull" class="toggle" href="#"> <i class="fas fa-bars fa-lg"></i> </a> <!-- Menu --> <ul class="hide"> <li class="separator"> | </li> <li> <a class="clear" aria-label="Books" title="Books" href="/books/"> <span class="navbar-label ">Books</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="Roadmaps" title="Roadmaps" href="/ios-road-map/"> <span class="navbar-label ">Roadmaps</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="About Me" title="About Me" href="/about-me/"> <span class="navbar-label ">About Me</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="Tags" title="Tags" href="/tag/"> <i class="navbar-icon fas fa-tags" aria-hidden="true"></i> <span class="navbar-label navbar-label-with-icon">Tags</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="Blog Archive" title="Blog Archive" href="/archive/"> <i class="navbar-icon fas fa-archive" aria-hidden="true"></i> <span class="navbar-label navbar-label-with-icon">Blog Archive</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="Search" title="Search" href="/search/"> <i class="navbar-icon fas fa-search" aria-hidden="true"></i> <span class="navbar-label navbar-label-with-icon">Search</span> </a> </li> <li class="separator"> | </li> <!-- <li><a id="theme-toggle" title="Why my 0.3 MB image occupies around 10 MB on RAM? " aria-label="Why my 0.3 MB image occupies around 10 MB on RAM?" onclick="themeToggle()"></a></li> --> </ul> </nav> </header>
    <div class="content">
      <article >
    <header id="main" style="">
        <div class="title-padder">
            
                <h1 id="Why+my+0.3+MB+image+occupies+around+10+MB+on+RAM%3F" class="title">Why my 0.3 MB image occupies around 10 MB on RAM?</h1>
                


<div class="post-info">
      <img alt="Author's avatar" src="/images/deya_64.webp" loading="lazy">
    
    <p class="meta">
      Deya Elkhawaldeh - 
      
      February 22, 2022
    </p></div>

            
        </div>
    </header>

    <section class="post-content">
    
            <p>When developing applications, especially those that handle a large number of images, you may notice a significant difference between the disk size of an image and the amount of RAM it consumes. For example,</p>

<p>you might have an image file that is only 0.3 MB on disk, yet it occupies around 10 MB of RAM when loaded. This post explores why this happens and what you can do to manage memory usage more effectively.</p>

<!--more-->

<!-- _includes/centered-image.html -->
<div class="centered-image">
  <img src="../images/covers/imagesize_full.webp" alt="" class="centered-image__img" />
  <p align="center">
    <em></em>
  </p>
</div>

<h2 id="root-of-discrepancy">Root Of Discrepancy?</h2>
<p>The primary reason for this discrepancy lies in how images are stored on disk versus how they are represented in memory. Images on disk are often compressed using formats like <code class="language-plaintext highlighter-rouge">JPEG</code> or <code class="language-plaintext highlighter-rouge">PNG</code>, which reduce file size by storing data more efficiently. However, when an image is loaded into RAM, it must be decompressed and converted into a raw bitmap format that the system can render on the screen. This raw format requires significantly more memory.</p>

<h3 id="the-formula-for-memory-usage">The Formula for Memory Usage</h3>
<p>To understand how much memory an image will consume, you can use the following formula:</p>

\[\scriptsize{\text{Image Size on RAM} = (\text{pixels height} \times \text{pixels width} \times \text{color depth bytes})}\]

<h3 id="example-srgb-image">Example: sRGB Image</h3>

<p>Consider an image with dimensions 1568x960 pixels and an <code class="language-plaintext highlighter-rouge">sRGB</code> color profile, which uses 24 bits per pixel (or 3 bytes per pixel):</p>

<p>The following image takes around 131 KB on disk and has an <code class="language-plaintext highlighter-rouge">sRGB</code> color profile, which is 24 bits (8 bits per channel).</p>

<!-- _includes/centered-image.html -->
<div class="centered-image">
  <img src="/images/posts/roman.webp" alt="" class="centered-image__img" width="960" height="1568" />
  <p align="center">
    <em></em>
  </p>
</div>

<p>The size of the image on the RAM would be:</p>

\[\scriptsize{\text{Image Size on RAM} = (\text{1568} \times \text{960} \times \text{3}) \text{ bytes} = 4,515,840 \text{ bytes} = 4.3 MB}\]

<h2 id="managing-image-memory-usage">Managing Image Memory Usage</h2>
<p>High memory usage from images can lead to performance issues, especially in memory-constrained environments like mobile devices. To mitigate this, you can employ several strategies:</p>

<h3 id="downsampling-images">Downsampling Images</h3>
<p>One effective way to reduce memory usage is to downsample images before loading them into memory. Downsampling reduces the image dimensions to match the display size, thus reducing the number of pixels and the overall memory required.</p>

<h3 id="example-in-swift-with-kingfisher">Example in Swift with Kingfisher</h3>
<p>In Swift, <a href="https://github.com/onevcat/Kingfisher" title="Kingfisher">Kingfisher</a> comes with an option to downsize images according to the screen scale, so you can have images in a reasonable size even if they come largely from the server.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">Kingfisher</span>

<span class="kd">extension</span> <span class="kt">UIImageView</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">setImageAsThumb</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span><span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">formattedURL</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="nf">addingPercentEncoding</span><span class="p">(</span><span class="nv">withAllowedCharacters</span><span class="p">:</span> <span class="o">.</span><span class="n">urlQueryAllowed</span><span class="p">)</span> <span class="p">??</span> <span class="s">""</span>
        <span class="k">let</span> <span class="nv">scale</span> <span class="o">=</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">scale</span>
        <span class="k">let</span> <span class="nv">resizingProcessor</span> <span class="o">=</span> <span class="kt">ResizingImageProcessor</span><span class="p">(</span><span class="nv">referenceSize</span><span class="p">:</span> <span class="kt">CGSize</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mf">50.0</span> <span class="o">*</span> <span class="n">scale</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mf">50.0</span> <span class="o">*</span> <span class="n">scale</span><span class="p">))</span>
        <span class="k">self</span><span class="o">.</span><span class="n">kf</span><span class="o">.</span><span class="nf">setImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">formattedURL</span><span class="p">),</span> <span class="nv">placeholder</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nf">processor</span><span class="p">(</span><span class="n">resizingProcessor</span><span class="p">)])</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>As the two images in this post are the same size and color profile, they will occupy the same amount of RAM!</p>
</blockquote>

<h3 id="understanding-image-compression-formats">Understanding Image Compression Formats</h3>

<p>While <code class="language-plaintext highlighter-rouge">JPEG</code> and <code class="language-plaintext highlighter-rouge">PNG</code> are common image formats, they handle compression differently:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">JPEG</code></strong>: Lossy compression, which reduces file size by discarding some image data. It’s efficient for photos but less so for images with sharp edges or text.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">PNG</code></strong>: Lossless compression, which retains all image data. It’s better for images that need to preserve exact details but usually results in larger file sizes than <code class="language-plaintext highlighter-rouge">JPEG</code>.</li>
</ul>

<p>Both formats, when decompressed, will expand into a full bitmap that occupies significantly more memory.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Understanding how images are represented in memory versus on disk is crucial for optimizing your applications. While a compressed image file might be small, its memory footprint can be substantial due to the need to store it as a raw bitmap in RAM. By employing strategies like downsampling, you can better manage memory usage and improve your application’s performance.</p>

    
    </section>

    <!-- Social media shares -->
    

<div class="share-buttons">
    <ul class="share-buttons">
        <li class="meta">Share</li>
        
        <li>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/" target="_blank"
               title=" Facebook">
                <i class="fab fa-facebook-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on Facebook</span>
            </a>
        </li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=Why+my+0.3+MB+image+occupies+around+10+MB+on+RAM%3F%20https%3A%2F%2Fswiftbydeya.com%2Fwhy-my-0-3-mb-image-takes-14-mb-on-ram%2F"
               target="_blank" title="">
                <i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Tweet</span>
            </a>
        </li>
            
        <li>
            <a href="https://www.reddit.com/submit?url=https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/&title=Why+my+0.3+MB+image+occupies+around+10+MB+on+RAM%3F%20%7C%20Swift+By+Deya"
               target="_blank" title=" Reddit">
                <i class="fab fa-reddit-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on Reddit</span>
            </a>
        </li>
         
        <li>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/&title=Why+my+0.3+MB+image+occupies+around+10+MB+on+RAM%3F%20%7C%20Swift+By+Deya&summary=&source=https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/"
               target="_blank" title=" LinkedIn">
                <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on LinkedIn</span>
            </a>
        </li>
          
        <li>
            <a href="mailto:?subject=Why my 0.3 MB image occupies around 10 MB on RAM?%20%7C%20Swift By Deya&body=https://swiftbydeya.com/why-my-0-3-mb-image-takes-14-mb-on-ram/"
               target="_blank" title="">
                <i class="fas fa-envelope-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Email</span></a>
        </li>
        
    </ul>
</div>




    <!-- Tag list -->
    
    


  <div class="tag-list">
    <ul>
      
        <li class="meta">Tags</li>
      

      
        <li><a class="button" href="https://swiftbydeya.com/tag#Development">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Development</p>
        </a></li>
      
        <li><a class="button" href="https://swiftbydeya.com/tag#Graphics">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Graphics</p>
        </a></li>
      
        <li><a class="button" href="https://swiftbydeya.com/tag#Optimization">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Optimization</p>
        </a></li>
      
        <li><a class="button" href="https://swiftbydeya.com/tag#Performance">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Performance</p>
        </a></li>
      
        <li><a class="button" href="https://swiftbydeya.com/tag#Programming">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Programming</p>
        </a></li>
      
        <li><a class="button" href="https://swiftbydeya.com/tag#Swift">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Swift</p>
        </a></li>
      
        <li><a class="button" href="https://swiftbydeya.com/tag#iOS">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> iOS</p>
        </a></li>
      
    </ul>
  </div>



</article>




<!-- To change color of links in the page --> <style> header#main { background-size: cover; background-repeat: no-repeat; background-position: center; } </style> <!-- Post navigation --> <div id="post-nav"> <div id="previous-post"> <a alt="Easily Tiling Images in Interface Builder Without Code" href="/easily-tiling-images-in-interface-builder-without-code/"> <p>Previous post</p> Easily Tiling Images in Interface Builder Without Code </a> </div> <div id="next-post"> <a alt="Why You Should Never Use Floating-Point or Double Data Types for Money Calculations!" href="/never-use-floating-point-double-data-types-for-monetary-calculations/"> <p>Next post</p> Why You Should Never Use Floating-Point or Double Data Types for Money Calculations! </a> </div> </div> <!--Utterances--> <!-- Cusdis --> <!-- Disqus -->


    </div>
    
    <footer class="site-footer"> <p class="text"> Swift Insights: A Curated Collection of Weekly Articles Exploring the Depths of iOS Development </p> <div class="footer-icons"> <ul> <!-- Social icons from Font Awesome, if enabled --> <li> <a feed.xml href="/feed.xml" title="Follow RSS feed" target="_blank"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://github.com/deya-eldeen" title="Follow on Github" target="_blank" rel="noopener"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-github fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://www.linkedin.com/in/deya-eldeen-elkhawaldeh-47908662" title="Follow on Linkedin" target="_blank" rel="noopener"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="mailto:deyaeldeenk@gmail.com"" title="Follow on Mail" target="_blank" rel="noopener"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://twitter.com/deya_eldeen" title="Follow on Twitter" target="_blank" rel="noopener"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </li> </ul> </div> </footer>
  </body>
</html>
